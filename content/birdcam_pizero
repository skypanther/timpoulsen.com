Title: Birdcam with a Pi Zero W
Date: 2022-04-26
Category: Making
Tags: raspberry pi, making
Status: draft


Trying with v4l2 rather than picamera, based on https://raspberrypi.stackexchange.com/a/63649/85755


1. Set up the pi
2. `sudo apt update` then `sudo apt upgrade`
3. `sudo apt install -y ffmpeg`


    ::shell
    #!/bin/sh

    # Use V4L2 (preferred) instead of raspivid
    # exposure_dynamic_framerate=1 (raspivid --fps 0) - reduce framerate/increase exposure in low light
    # scene_mode=8 (raspivid --exposure night) - allow framerate reduction to increase exposure
    v4l2-ctl -v width=1296,height=972,pixelformat=H264 \
            --set-ctrl=exposure_dynamic_framerate=1 \
            --set-ctrl=video_bitrate=5000000 \
            --set-ctrl=scene_mode=8

    exec ffmpeg -f h264 -probesize 32 -r 30 -i /dev/video0 -vcodec copy -an -f rtp_mpegts udp://224.0.1.2:5004

